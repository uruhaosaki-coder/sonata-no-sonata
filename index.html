<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.7">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="ja"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;title&gt;そなたのソナタ&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>body {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-family: "Inter", sans-serif;</p>
<p class="p1"><span class="Apple-converted-space">            </span>scroll-behavior: smooth;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* 選択中のボタンスタイル (通常のCSS) */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.track-button.selected {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #D3C34A; /* 黄色 */</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #1B2A5C;<span class="Apple-converted-space">            </span>/* 濃い青文字 */</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: 4px solid #fde68a; /* ring-yellow-200 の代わり */</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: bold;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding-top: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding-bottom: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding-left: 0.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding-right: 0.5rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;!-- 背景を #717071 (グレー) に変更 --&gt;</p>
<p class="p1">&lt;body class="bg-[#717071] flex items-center justify-center min-h-screen p-4"&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- カードの背景色を #1B2A5C (濃い青) に変更 --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="w-full max-w-2xl bg-[#1B2A5C] rounded-lg shadow-xl p-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;!-- タイトルの文字色を #D3C34A (黄色) に変更 --&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;h1 class="text-2xl font-bold text-center text-[#D3C34A] mb-6"&gt;そなたのソナタ&lt;/h1&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;!-- トラック選択ボタン --&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div id="button-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4 mb-6 w-full"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;template id="track-button-template"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;!-- Trackボタン: 白背景(bg-white)、青文字(text-[#1B2A5C]) --&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;button class="track-button text-[#1B2A5C] font-bold py-4 px-2 rounded-lg bg-white hover:bg-gray-100 transition-all duration-200 shadow-md text-sm border-4 border-transparent"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>Track</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/template&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;!-- 操作ボタン --&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="flex space-x-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button id="play-button" class="flex-1 bg-green-500 hover:bg-green-600 text-white font-bold py-4 px-6 rounded-lg text-lg shadow-lg transition duration-300"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>再生</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button id="stop-button" class="flex-1 bg-red-500 hover:bg-red-600 text-white font-bold py-4 px-6 rounded-lg text-lg shadow-lg transition duration-300"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>停止</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;!-- ステータス表示 (明るいグレー) --&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div id="status" class="text-center text-gray-300 mt-4 h-6"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>// --- ▼ 音源設定 (GitHub Pagesアップロード用) ▼ ---</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// !【重要】このファイルは GitHub Pages にアップロードするためのものです。</p>
<p class="p1"><span class="Apple-converted-space">        </span>// ! このまま「プレビュー」しても "ファイルが見つからない" というエラーになりますが、</p>
<p class="p1"><span class="Apple-converted-space">        </span>// ! これは正常な動作です。</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// !【警告】 'a.m4a' などの .m4a 形式のファイルは、多くのブラウザで再生エラーになります。</p>
<p class="p1"><span class="Apple-converted-space">        </span>// ! もし GitHub Pages で音が鳴らない場合は、</p>
<p class="p1"><span class="Apple-converted-space">        </span>// ! 必ず音源を .mp3 形式に変換し、ここのファイル名も "a.mp3" などに修正してください。</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// !【修正】 .m4a ではなく、 .mp3 形式を使うことを強く推奨します。</p>
<p class="p1"><span class="Apple-converted-space">        </span>// ! ガイドに従って .mp3 に変換したファイル名に書き換えてあります。</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// 再生開始時に鳴る音</p>
<p class="p1"><span class="Apple-converted-space">        </span>const A_URL = "a.mp3";</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// 再生終了時に鳴る音</p>
<p class="p1"><span class="Apple-converted-space">        </span>const B_URL = "b.mp3";</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// 選択する10種類の音トラック</p>
<p class="p1"><span class="Apple-converted-space">        </span>const TRACK_URLS = [</p>
<p class="p1"><span class="Apple-converted-space">            </span>"a.mp3",<span class="Apple-converted-space">      </span>// Track 1</p>
<p class="p1"><span class="Apple-converted-space">            </span>"b.mp3",<span class="Apple-converted-space">      </span>// Track 2</p>
<p class="p1"><span class="Apple-converted-space">            </span>"track3.mp3", // Track 3</p>
<p class="p1"><span class="Apple-converted-space">            </span>"track4.mp3", // Track 4</p>
<p class="p1"><span class="Apple-converted-space">            </span>"track5.mp3", // Track 5</p>
<p class="p1"><span class="Apple-converted-space">            </span>"track6.mp3", // Track 6</p>
<p class="p1"><span class="Apple-converted-space">            </span>"track7.mp3", // Track 7</p>
<p class="p1"><span class="Apple-converted-space">            </span>"track8.mp3", // Track 8</p>
<p class="p1"><span class="Apple-converted-space">            </span>"track9.mp3", // Track 9</p>
<p class="p1"><span class="Apple-converted-space">            </span>"track10.mp3" // Track 10</p>
<p class="p1"><span class="Apple-converted-space">        </span>];</p>
<p class="p1"><span class="Apple-converted-space">        </span>// --- ▲ 音源設定 ▲ ---</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Audioオブジェクトのインスタンス (使い回します)</p>
<p class="p1"><span class="Apple-converted-space">        </span>const audioA = new Audio();</p>
<p class="p1"><span class="Apple-converted-space">        </span>const audioB = new Audio();</p>
<p class="p1"><span class="Apple-converted-space">        </span>const audioMain = new Audio();</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>let currentSequence = []; // 再生シーケンスのキュー</p>
<p class="p1"><span class="Apple-converted-space">        </span>let currentAudio = null; // 現在再生中のAudioオブジェクト</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// DOM要素</p>
<p class="p1"><span class="Apple-converted-space">        </span>const buttonContainer = document.getElementById('button-container');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const playButton = document.getElementById('play-button');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const stopButton = document.getElementById('stop-button');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const statusEl = document.getElementById('status');</p>
<p class="p1"><span class="Apple-converted-space">        </span>const template = document.getElementById('track-button-template');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>let selectedTrackIndex = 0; // デフォルトでTrack 1 (インデックス 0) を選択</p>
<p class="p1"><span class="Apple-converted-space">        </span>let trackButtons = []; // ボタンの参照を保持する配列</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// --- 初期化 ---</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// トラックボタンを生成</p>
<p class="p1"><span class="Apple-converted-space">        </span>TRACK_URLS.forEach((url, index) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">            </span>const clone = template.content.cloneNode(true);</p>
<p class="p1"><span class="Apple-converted-space">            </span>const button = clone.querySelector('.track-button');</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>button.textContent = `Track ${index + 1}`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>button.dataset.index = index;<span class="Apple-converted-space"> </span></p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>button.addEventListener('click', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>selectTrack(index);</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>buttonContainer.appendChild(clone);</p>
<p class="p1"><span class="Apple-converted-space">            </span>trackButtons.push(button);<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// トラック選択処理</p>
<p class="p1"><span class="Apple-converted-space">        </span>function selectTrack(index) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>// ★診断用ログ★</p>
<p class="p1"><span class="Apple-converted-space">            </span>console.log(`selectTrack called for index: ${index}`);<span class="Apple-converted-space"> </span></p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>selectedTrackIndex = index;</p>
<p class="p1"><span class="Apple-converted-space">            </span>trackButtons.forEach((btn, i) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>// 'selected' クラス (黄色の背景) の付け外し</p>
<p class="p1"><span class="Apple-converted-space">                </span>btn.classList.toggle('selected', i === index);</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>console.log(`Track ${index + 1} selected`);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// 起動時にデフォルト（Track 1）を選択状態にする</p>
<p class="p1"><span class="Apple-converted-space">        </span>selectTrack(0);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>// --- 再生ロジック ---</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>playButton.addEventListener('click', playSequence);</p>
<p class="p1"><span class="Apple-converted-space">        </span>stopButton.addEventListener('click', stopAllAudio);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function playSequence() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>stopAllAudio();<span class="Apple-converted-space"> </span></p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>currentSequence = [</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ audio: audioA, url: A_URL, name: "A" },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ audio: audioMain, url: TRACK_URLS[selectedTrackIndex], name: "Main" },</p>
<p class="p1"><span class="Apple-converted-space">                </span>{ audio: audioB, url: B_URL, name: "B" }</p>
<p class="p1"><span class="Apple-converted-space">            </span>];</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>playNextInSequence();</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function playNextInSequence() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>if (currentSequence.length === 0) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>console.log("Sequence finished");</p>
<p class="p1"><span class="Apple-converted-space">                </span>statusEl.textContent = "再生終了";</p>
<p class="p1"><span class="Apple-converted-space">                </span>currentAudio = null;</p>
<p class="p1"><span class="Apple-converted-space">                </span>return;</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>const next = currentSequence.shift();</p>
<p class="p1"><span class="Apple-converted-space">            </span>currentAudio = next.audio;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>currentAudio.removeEventListener('ended', playNextInSequence);</p>
<p class="p1"><span class="Apple-converted-space">            </span>currentAudio.removeEventListener('error', handleAudioError);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>currentAudio.src = next.url;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>currentAudio.addEventListener('ended', playNextInSequence);</p>
<p class="p1"><span class="Apple-converted-space">            </span>currentAudio.addEventListener('error', (e) =&gt; handleAudioError(e, next.name));</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>statusEl.textContent = `${next.name === 'Main' ? 'Track ' + (selectedTrackIndex + 1) : next.name} を再生中...`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>console.log(`Playing ${next.name} (URL: ${next.url})`);</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>currentAudio.play().catch(e =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>console.error(`Playback error (${next.name}):`, e.message);</p>
<p class="p1"><span class="Apple-converted-space">                </span>statusEl.textContent = `再生エラー (${next.name})`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>playNextInSequence();</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function handleAudioError(e, name) {</p>
<p class="p1"><span class="Apple-converted-space">            </span>console.error(`Audio Playback Error (${name}):`, e);</p>
<p class="p1"><span class="Apple-converted-space">            </span>statusEl.textContent = `エラー (${name}): ファイル読込失敗`;</p>
<p class="p1"><span class="Apple-converted-space">            </span>playNextInSequence();</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>function stopAllAudio() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>[audioA, audioB, audioMain].forEach(audio =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (audio) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>audio.pause();</p>
<p class="p1"><span class="Apple-converted-space">                    </span>audio.currentTime = 0;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>audio.removeEventListener('ended', playNextInSequence);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>audio.removeEventListener('error', handleAudioError);</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>currentSequence = [];<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>currentAudio = null;</p>
<p class="p1"><span class="Apple-converted-space">            </span>statusEl.textContent = "停止しました";</p>
<p class="p1"><span class="Apple-converted-space">            </span>console.log("All audio stopped");</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
